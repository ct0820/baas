<div align=center>
![image](https://github.com/codeboxcat/python/blob/master/image1.png?raw=true)
---
<font color=#0099ff size=48 face="黑体">**火花链接入平台**


**标准服务接口**</font> 
---

<font color=#0099ff size=4 face="黑体"><center>通用版</center></font> 


<img src="https://github.com/codeboxcat/python/blob/master/image2.png?raw=true" width="70" height="40" />

  
  <br /><br /><br /><br /><br /><font color=#0099ff size=4 face="黑体">烨链（上海）科技有限公司<br /><br /><br /><br /><br />
  



  

---
<font color=black size=2>**修改记录**</font>  

| 版本号         | 发布时间       | 内容   |
| :------------- |:-------------| :-----|
| V0.1          | 2018/3/28    | 初版             |
| V0.2          |2018/3/29     | 统一数据格式      |
|V0.3           | 2018/4/24     |   扩展文本上链接口 |
|V0.9           | 2018/5/20     |  重构及跨链支持    |
|V0.9.1          |2018/5/27   |   调整和优化部分接口参数，增加accessToken的使用方式 |
|V0.9.2         |2018/6/1   |   丰富大量接口，调整部分接口参数  |
  
  <br /><br /><br /> <br /><br /><br /><br /><br /><font color=black size=4>**目录**</font>
  
###<p align="left"><a href="#1. 引言">1. 引言</a>  
######<p align="left"><a href="#1.1. 概述">1.1. 概述</a>  
######<p align="left"><a href="#1.2. 名词解释">1.2. 名词解释</a>
######<p align="left"><a href="#1.3. 统一说明">1.3. 统一说明</a>

###<p align="left"><a href="#2. 接入系统接口">2. 接入系统接口</a>
######<p align="left"><a href="#2.1. 接入系统初始化">2.1. 接入系统初始化</a>
######<p align="left"><a href="#2.2. 生成访问凭证">2.2. 生成访问凭证</a>
######<p align="left"><a href="#2.3. 创建企业钱包">2.3. 创建企业钱包</a>
######<p align="left"><a href="#2.4. 创建用户钱包">2.4. 创建用户钱包</a>
######<p align="left"><a href="#2.5. 选择区块链[可选]">2.5. 选择区块链[可选]</a>
######<p align="left"><a href="#2.6. 选择通证[可选]">2.6. 选择通证[可选]</a>
######<p align="left"><a href="#2.7. 同步所有钱包[可选]">2.7. 同步所有钱包[可选]</a>
######<p align="left"><a href="#2.8. 获取系统消息[可选]">2.8. 获取系统消息[可选]</a>

###<p align="left"><a href="#3. 用户钱包操作接口">3. 用户钱包操作接口</a> 
######<p align="left"><a href="#3.1. 设置支付密码">3.1. 设置支付密码</a> 
#####<p align="left"><a href="#3.2. 钱包的支付请求">3.2. 钱包的支付请求</a>
#####<p align="left"><a href="#3.3. 获取钱包余额">3.3. 获取钱包余额</a>
#####<p align="left"><a href="#3.4. 获得支付信息">3.4. 获得支付信息</a>
#####<p align="left"><a href="#3.5. 获得支付历史">3.5. 获得支付历史</a>
#####<p align="left"><a href="#3.6. 钱包余额同步">3.6. 钱包余额同步</a>
#####<p align="left"><a href="#3.7. 获取钱包的账户信息">3.7. 获取钱包的账户信息</a>

###<p align="left"><p align="left"><a href="#4. 用户账户接口">4. 用户账户接口</a> 
#####<p align="left"><a href="#4.1. 创建账户">4.1. 创建账户</a>
#####<p align="left"><a href="#4.2. 账户充值">4.2. 账户充值</a>
#####<p align="left"><a href="#4.3. 账户的支付请求">4.3. 账户的支付请求</a>
#####<p align="left"><a href="#4.4. 获取账户余额">4.4. 获取账户余额</a>
#####<p align="left"><a href="#4.5. 获取账户支付信息">4.5. 获取账户支付信息</a>

###<p align="left"><a href="#5. 用户钱包账户关联接口">5. 获取账户支付历史</a>
#####<p align="left"><a href="#5.1. 绑定单个账户">5.1. 绑定单个账户</a> 
#####<p align="left"><a href="#5.2. 绑定多个账户">5.2. 绑定多个账户</a> 
#####<p align="left"><a href="#5.3. 关联单个账户">5.3. 关联单个账户</a> 
#####<p align="left"><p align="left"><a href="#5.4. 关联多个账户">5.4. 关联多个账户</a> 


###<p align="left"><a href="#6. 文本上链接口">6. 文本上链接口</a> 
#####<p align="left"><a href="#6.1. 文本上链">6.1. 文本上链</a> 
#####<p align="left"><a href="#6.2. 查询文本内容">6.2. 查询文本内容</a> 
#####<p align="left"><a href="#6.3. 查询文本列表">6.3. 查询文本列表</a> 


###<p align="left"><a href="#7. 用户钱包密码接口">7. 用户钱包密码接口</a>   
#####<p align="left"><a href="#7.1 修改查询密码">7.1 修改查询密码</a>  
#####<p align="left"><a href="#7.2. 重置查询密码">7.2. 重置查询密码</a>  
#####<p align="left"><a href="#7.3. 验证查询密码">7.3. 验证查询密码</a>
#####<p align="left"><a href="#7.4. 修改支付密码">7.4. 修改支付密码</a>
#####<p align="left"><a href="#7.5. 重置支付密码">7.5. 重置支付密码</a>
#####<p align="left"><a href="#7.6. 验证支付密码">7.6. 验证支付密码</a>



###<p align="left"><a href="#8. 系统管理接口">8. 系统管理接口</a> 
#####<p align="left"><a href="#8.1. 注册区块链[可选，待实现]">8.1. 注册区块链[可选，待实现]</a>
#####<p align="left"><a href="#8.2. 新增通证[可选]">8.2. 新增通证[可选]</a>
#####<p align="left"><a href="#8.3. 添加通证[可选，待实现]">8.3. 添加通证[可选，待实现]</a>
















   <font color=gray size=3>火花链接入平台标准服务接口</font>  
---  
#<p align="left"><a name="1. 引言">1. 引言</a>

<p align="left">引言部分主要包括概述、名词解释和统一说明三部分。 </p>  



**<p align="left"><a name="1.1. 概述">1.1. 概述</a>**

&ensp; &ensp;火花链接入平台是对接于各行各业应用和各大公链之间的接入平台，采用一系列技术来提高公链的接入TPS，并统一公链之间的接入差异，简化应用的区块链接入，使得一套接口能快速在各种不同公链之间进行切换或进行跨链交易。

**<p align="left"> <a name="1.2. 名词解释">1.2. 名词解释</a>**

 
| 名词         | 英文       | 说明   |
| :------------- |:-------------| :-----|
| 钱包| wallet| 火花链接入平台中的钱包，一个钱包可以包括多个不同公链上的账户，把不同公链中的账户统一起来，实现跨链交易。|
| 钱包地址|walletAddr| 火花链接入平台中的钱包的地址，通过该地址可以查询其下所有账户的余额和流水，配置钱包支付密码，可以进行跨链转账。|
|密码| password |钱包的密码，通过该密码，用户可以查询其下所有账户的余额和流水 |
|支付密码| payPassword | 钱包的支付密码|
|账户|account  | 账户对应着公链中的钱包，代表公链钱包中的公钥地址。|
|私钥 |c | 账户的私钥 |
|App钱包|App wallet|每个在火花链接入平台注册的应用系统，都需要创建一个应用级别的钱包，该钱包就是APP钱包。|
|用户钱包|User wallet|接入的应用系统的用户也需要钱包来进行业务上的交易，该用户对应的火花链接入平台钱包就是用户钱包。|  

 **<p align="left">	<a name="1.3. 统一说明">1.3. 统一说明</a>**  
 <p align="left">1：接口地址    
 &ensp; &ensp;测试系统域名:[https://tapi.sparkchain.cn](https://tapi.sparkchain.cn)，以下章节中所设计的接口地址都需要在访问时加上该测试系统，如接入系统初始化的接口地址为：/v1/app/init，  
那么在浏览器中则使用[https://tapi.sparkchain.cn/v1/app/init](https://tapi.sparkchain.cn/v1/app/init)即可。  
 <p align="left">2：返回格式  
    &ensp; &ensp;接口返回格式统一，采用JSON格式返回，JSON格式中包括 success,code，message和data。如下图1所示：
    <div align=center>
![image](https://github.com/codeboxcat/-/blob/master/1528702150106.jpg?raw=true)
---  
图1 接口统一的格式  
&ensp; &ensp;Code：接口处理的标识，其中 成功：200, 请求失败: 400，未认证:401, 服务器内部错误:505。其它的code的代表业务错误编码。 
 
&ensp; &ensp;Message：返回的消息，主要是指错误的返回信息，对于正确的返回，也有可能会给出一些提示信息和警告信息。Data:返回的业务数据。  

 <p align="left">3：问题及沟通
 火花链BaaS开发者QQ总群：594629943  
 &ensp; &ensp;火花链BaaS开发者微信群，扫下方二维码加好友，备注火花链BaaS开发，然后拉进群。  <div align=center>
![image](https://github.com/codeboxcat/-/blob/master/问题及沟通微信二维码.jpg?raw=true)
---

 
#<p align="left"> <a name="2. 接入系统接口">2. 接入系统接口</a>
  
  

接入系统接口为业务系统上链提供了一系列的接口，首先接入系统得在火花链接入平台进行注册初始化，换取接入应用系统的accessToken。然后就可以根据初始化的相关信息来创建应用系统级别的APP钱包，创建App钱包之后，根据业务所需，为其应用系统中用户在火花链接入平台中创建用户钱包。之后的上链或交易就发生在这些钱包之间。

**<p align="left"> <a name="2.1. 接入系统初始化">2.1. 接入系统初始化</a>**
   
 &ensp; &ensp;接入系统初始化对业务系统上链相关的信息进行初始化，主要传入业务系统编号、名称及回调地址,成功时返回appid和appsecret。  
 <p align="left">接口地址：/v1/app/init
 <p align="left">请求方式：GET/POST  
 提交参数：  
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|appcode|String|业务系统编号,一般用业务系统的拼音缩写或英文|
|appname|String|业务系统名称，一般用中文名|
|transCallBackUrl|String|【可选】业务系统在进行交易时，不能立即返回状态，通过该地址进行回调，获取事务的返回状态|
|msgCallBackUrl|String|【可选】通过该地址进行回调，获取消息的返回值|
|userid|String|【可选】传入租户ID（针对租用平台和企业统一上链接入平台）|
<p align="left">请求示例：  
 
---
![image](https://github.com/codeboxcat/-/blob/master/请求示例.jpg?raw=true)  
---

<p align="left">返回的结果信息：  
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|appid|String|业务系统ID|
|appsecret|String|业务系统的秘钥|
<p align="left">返回示例：
---
![image](https://github.com/codeboxcat/-/blob/master/返回示例.jpg?raw=true)
---
 
**<p align="left">	<a name="2.2. 生成访问凭证">2.2. 生成访问凭证</a></p>**  
 
<p align="left">调用其它接口时，一般都需要访问凭证。通过此接口就可以获取访问凭证accessToken，访问凭证有一定的时效性（目前2个小时）。  
<font color=Red >如果需要在代码中使用访问凭证，可以参考附1的简单示例（java语言）  
<p align="left"><font color=#0099ff >接口地址：/v1/app/access  
请求方式：GET/POST  
接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|appid|String|业务系统的ID|
|appsecret|String|业务系统的秘钥|  
<p align="left">请求示例： 
--- 
![image](https://github.com/codeboxcat/-/blob/master/请求示例2.jpg?raw=true)
---
<p align="left">返回的结果信息： 
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|accessToken|String|访问凭证|
<p align="left">返回示例：
---
![image](https://github.com/codeboxcat/-/blob/master/返回示例3.jpg?raw=true)
  
**<p align="left"><a name="2.3. 创建企业钱包">2.3. 创建企业钱包</a></p>**  
  为当前的接入应用创建一个应用级别的钱包，所有用户钱包的激活及GAS的充值，都需要或者可以通过该钱包来进行转账。  
 <p align="left">接口地址：/v1/app/createAppWallet
 <p align="left">请求方式：GET/POST
 接口参数：
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|chainCodes|String|【可选】区块链编码（多个值，用逗号分隔），目前支持jingtum和moac。如果指定该参数，会在创建App钱包之前为当前的App应用系统关联上对应的公链。也可以使用2.5节中的选择区块链接口预先进行公链的关联。此参数值可为空|
|onlyWallet|boolean|【可选】是否仅生成钱包（默认值为false）,如果为true，那么只生成钱包，不到关联的公链上创建账户，默认会创建账户。|  

<p align="left">请求示例：
---
![](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B4.jpg?raw=true)
---
<p align="left">返回的结果信息：

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址,通过该地址可以找到账户|
|userId|String|用户Id|
|password|String|查询密码|
|accounts|list|账户列表|
|chainCode|String |区块链的编码|
|account|String|账户|

<p align="left">返回示例：

![](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B5.jpg?raw=true)
---

**<p align="left"><a name="2.4. 创建用户钱包">2.4. 创建用户钱包</a></p>**  
 &ensp; &ensp;为注册的企业应用系统中的用户创建用户钱包，每个人仅可以创建一个用户钱包，以传入的用户名作为应用系统中的唯一标识，密码是用户用来查询其余额和交易记录等相关使用。  
<p align="left">接口地址：/v1/app/createWallet  
<p align="left">请求方式：GET/POST
<p align="left">接口参数：

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
| accessToken |String|访问凭证|
|userId|String|用户Id|
|password|String|查询密码|
|onlyWallet|boolean|【可选】是否仅生成钱包（默认值为false）,如果为true，那么只生成钱包，不到关联的公链上创建账户，默认会创建账户。|  


<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B5.jpg?raw=true)
---
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|appId|String|应用Id|
|userId|String|用户Id|
|accounts|list|账户列表|
|chainCode|String|区块链编码|
|account|String|账户|  

<p align="left">返回示例：
![iamge](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B6.jpg?raw=true)  
**<p align="left"><a name="2.5. 选择区块链[可选]">2.5. 选择区块链[可选]</a>**  
&ensp; &ensp;接入系统在接入区块链时到底接入哪个或哪些公链呢？不像其它平台，在火花链接入平台中，把这个选择的权利完全交给接入系统自己，接入系统不仅能选择块链，同时还可以通过接口来注册相关的公链到火花链平台（未开放），然后进行选择。选择区域链的操作已经集成到创建企业钱包中，没有特殊的要求，不需要单独调用该接口来进行区域链的选择。  
<p align="left">接口地址：/v1/app/selectChain  
<p align="left">请求方式：GET/POST  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|chainCodes|String|区块链编码（多个值时，用逗号分隔），目前支持jingtum和moac，可二选一|
<p align="left">请求示例：
---
![iamge](https://github.com/codeboxcat/-/blob/master/%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B6.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|  

<p align="left">返回示例：  
---
![image](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B7.jpg?raw=true)  
---

**<p align="left"><a name="2.6. 选择通证[可选]">2.6. 选择通证[可选]</a></p>** 

&ensp; &ensp;接入不同的公链之后，接入系统需要关注的是在其接入系统中需要使用哪一些代币（通证）来进行交易，比如接入系统可以自己发行自己的币种，然后采用自己发行的币种在自己的接入系统中进行交易，这个时候就需要给不同接入系统选择不同的代币（通证）的权利。  
&ensp; &ensp;选择通证的前提是需要发布第三方通证，可以通过第五章的接口进行发布，也可以在交流群中联系管理员进行后台的发布。  
&ensp; &ensp;如果不发行代币的话或者不使用第三方代币的话，那么就没有必要使用该接口来选择通证，对于原生通证（如moac链对应的MOAC代币及jingtum链对应的SWT代币）在创建App钱包时就已经进行了关联，没有必要再进行选择。  
<p align="left">接口地址：/v1/app/selectToken  
<p align="left">请求方式：GET/POST
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|chainCode|String|区块链编码(目前支持jingtum和moac)|
|tokenCodes|String|通证编码（多个值时，用逗号分隔）|  
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B7.jpg?raw=true)  
---

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|  
<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B8.jpg?raw=true)
**<p align="left"><a name="2.7. 同步所有钱包[可选]">2.7. 同步所有钱包[可选]</a>**. 
&ensp; &ensp;接入应用系统已经创建了App钱包和用户钱包并进行交易，有可能需要在应用系统中增加新的公链支持或代币（通证）支持，那么就需要通过选择区块链和和选择通证来进行关联，这时需要为所有用户钱包和app钱包创建新加公链的账户及账户下面的各种不同的代币的余额。  
&ensp; &ensp这就需要采用当前的接口来同步所有钱包，为接入应用系统的所有钱包都加创建新链的账户和初始化新币种的余额。因为调用该接口需要较长时间，平台采用异步处理方式，处理完成之后调用2.1节中msgCallBackUrl参数指定的回调地址回写处理结果，也可能通过调用2.8节中的系统消息来查看其处理结果。  
&ensp; &ensp可见，使用火花链接入平台中接入的话，不需要在接入初始化时考虑过多的需求，可以先接入应用，然后再逐步完善所需要的上链处理。所有的技术细节都屏蔽在火花链接入平台，提供一个简单易用的区块链接入方式。  
<p align="left">接口地址：/v1/app/syncAllWallet
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|  
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/%E6%8F%90%E4%BA%A4%E7%A4%BA%E4%BE%8B1.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|data|Object|数据|
|success|boolean|True:表明成功|
<p align="left">返回示例：  

![image](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B9.jpg?raw=true)
**<p align="left"><a name="2.8. 获取系统消息[可选]">2.8. 获取系统消息[可选]</a>**  
&ensp; &ensp;接入业务系统在使用火花链接入平台过程，会产生各种不同的系统消息，这些系统消息都保存在接入业务系统对应的消息库中。有的接口会调用注册的消息回调处理（2.1节中的参数）进行回写，有的接口会直接返回。也可以使用当前接口来获取其完整的系统消息列表。  
<p align="left">接口地址：/v1/app/sysMsg  
<p align="left">请求方式：GET/POST
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|msgType|String|【可选】消息类型|
|userId|String|【可选】用户Id|
|msgState|Integer|【可选】消息状态|
|pagesize|Integer|【可选】返回的每页数据量，默认每页10项|
|pagenum|Integer|【可选】返回第几页的数据，默认从1开始|  
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/提交示例2.jpg?raw=true)
---

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|data|	Object |数据|
|result|list|结果信息|
|appid|Long|对应的appid|
|createtime|String|创建时间|
|id|String|消息id|
|msgs|String|消息内容|
|state|Integer|消息状态|
|type|String|消息类型|
|userid|String|用户id|
|viewtime|Long|查看时间|
<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/返回示例10.jpg?raw=true)


<p align="left"><a name="3. 用户钱包操作接口">3. 用户钱包操作接口</a>   


&ensp; &ensp;接入业务系统上链的基本操作就是业务系统中用户进行转账等基本的操作，这些操作在发生在用户钱包之间。用户钱包操作接口主要对于用户之间的转账进行管理，以及对于转账之后的余额或交易流水进行查询。

<p align="left"><a name="3.1. 设置支付密码">3.1. 设置支付密码</a>  

&ensp; &ensp;用户钱包在转账之前，首先需要设定支付密码，通过该接口，来设置钱包的支付密码。
<p align="left">接口地址：/v1/wallet/setPayPassword
<p align="left">请求方式：GET/POST
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户Id walletAddr和userId二选一|
|password|String|查询密码|
|payPassword|String|支付密码|
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B3.1.jpg?raw=true)
---

<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|userId|String|用户Id|
<p align="left">返回示例：

![image](https://github.com/codeboxcat/-/blob/master/%E9%92%B1%E5%8C%853.1.2.jpg?raw=true)


<p align="left"><a name="3.2. 钱包的支付请求">3.2. 钱包的支付请求</a> 
 
&ensp; &ensp;钱包的支付功能是业务系统上链的最基本也是核心的功能，通过该接口可以实现同链同币之间的支付转账，也可以实现不同链中不同币之间的支付转账（目前开发中）。实现同一钱包，跨越不同公链的之间的交易。屏蔽了上链的难度。  

<font color=Red>&ensp; &ensp;注意：如果使用已经创建的钱包进行支付，其支付方的钱包需要有足够的代币，默认情况下没有代币，支付方钱包需要通过外部来源充入代币，详细与管理员联系。</font>  
<p align="left">接口地址：/v1/wallet/transfer  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|srcWalletAddr|String|【三选一】支付方的钱包地址(srcWalletAddr、srcUserId 、srcAccount）|
|srcUserId|String|【三选一】支付方的用户Id（srcWalletAddr、srcUserId 、srcAccount）|
|srcAccount|String|【三选一】支付方的账户（srcWalletAddr、srcUserId和srcAccount）|
|payPassword|String|支付方的支付密码|
|chainCode|String|区块链编码|
|tokenCode|String|通证编码(比如：jingtum的SWT、moac的MOAC)|
|destWalletAddr|String|【三选一】接受方的钱包地址(destWalletAddr、destUserId和destAccount）|
|destUserId|String|【三选一】接受方的用户Id（destWalletAddr、destUserId和destAccount）|
|destAccount|String|【三选一】接受方的账户（destWalletAddr、destUserId和destAccount）|
|amount|String|支付金额|
|bizId|String|业务Id（每次操作都不能重复，保证事务）|
|memo|String|【可选】记录内容|
|gasLimit|Long|【可选】Gas的上限倍数|
|gasPrice|Long|【可选】Gas计费价格单位|


<p align="left">请求示例：
---  
![image](https://github.com/codeboxcat/-/blob/master/%E9%92%B1%E5%8C%853.2.jpg?raw=true)
---

<p align="left">结果返回参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）---链返回正确的结果，但是交易有可能还在运行中|
|data|Object|返回数据|
|gasFee|String|交易费用|
|hash|String|交易返回的hash值|
<p align="left">结果示例：  

![image](https://github.com/codeboxcat/-/blob/master/3.2.2%E9%92%B1%E5%8C%85.jpg?raw=true)


<p align="left"><a name="3.3. 获取钱包余额">3.3. 获取钱包余额</a>  
支付完成之后，通过该接口获取用户钱包中的余额  
接口地址：/v1/wallet/balances  
请求方式：GET/POST  
接口参数:  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户IdwalletAddr和userId二选一|
|chainCode|String|【可选】区块链编码|
|tokenCode|String|【可选】通证编码（比如：jingtum的SWT、moac的MOAC）（为空时，可以查看该钱包下所有账户的余额）|
<p align="left">请求示例：
---  
![image](https://github.com/codeboxcat/-/blob/master/3.3%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息：
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|userId|String|用户Id|
|balances|list|余额数据|
|tokenCode|String|通证编码|
|balance|String|余额|
|chainCode|String|区块链编码|
|freezed|String|冻结的金额|
<p align="left">返回示例：  
![image](https://github.com/codeboxcat/-/blob/master/3.3.3.jpg?raw=true)

<p align="left"><a name="3.4. 获得支付信息">3.4. 获得支付信息</a>   

&ensp; &ensp;通过该接口获取转几天交易的详细流水信息。  
<p align="left">接口地址：/v1/wallet/transInfo
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|tranHash|String|交易hash|
|forceRefresh|boolean|【可选】强制刷新（默认为false，当为true时，会获取链上数据）|
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/3.4%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息:  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功），但交易有可能还在运行中，获取空的data|
|data|Object|返回数据|
|tokenCode|String|通证编码|
|tradeTime|Date|交易时间|
|amount|String|交易金额|
|gasFee|String|Gas费用|
|chainCode|String|区块链编码|
|memos|String|记录内容|
|destAccount|String|接受方的账户|
|srcAccount|String|支付方的账户|
|hash|String|交易的hash值|
<p align="left">获取不到支付信息时，返回结果：
![image](https://github.com/codeboxcat/-/blob/master/3.4.3.jpg?raw=true)

<p align="left">获取到支付信息时，返回结果：
![image](https://github.com/codeboxcat/-/blob/master/3.4.4.jpg?raw=true)
  

<p align="left"><a name="3.5. 获得支付历史">3.5. 获得支付历史</a>
&ensp; &ensp;通过该接口可以获取后用户通过火花链接入平台进行转账的所有流水。如果用户钱包中账户在接入平台外部进行转账，那么就需要通过账户接口中同步流水来先同步，然后可以获得钱包的所有流水（包括外部转账的流水)  
<p align="left">接口地址：/v1/wallet/transInfoList  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【三选一】钱包地址 （walletAddr、userId、accounts）备注：可以看到该钱包下所有账户的支付历史|
|userId|String|【三选一】用户Id（walletAddr、userId、accounts）备注：可以看到该用户钱包下账户的支付历史|
|accounts|String|【三选一】账户（walletAddr、userId、accounts）备注：可以看到指定账户的支付历史|
|pagesize|Integer|【可选】返回的每页数据量，默认每页10项|
|pagenum|Integer|【可选】返回第几页的数据，默认从1开始|
|starttime|String|【可选】开始时间，比如:2018-01-01 00:00:00|
|endtime|String|【可选】结束时间，比如：2018-06-01 23:59:59|
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/3.5%E9%92%B1%E5%8C%85.jpg?raw=true)
---
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|total|Integer|总记录数|
|pageSize|Integer|每页数据量|
|pageNum|Integer|第几页|
|results|list|结果数据|
|tokenCode|String|通证编码|
|tradeTime|Date|交易时间|
|amount|String|记录金额|
|gasFee|Double|交易费用|
|chainCode|String|区块链编码|
|memos|String|记录内容|
|destAccount|String|接受方的账户|
|state|Integer|状态（-1：失败；0：初始；1：等待；8：同步成功；9：成功）|
|srcAccount|String|发起方的账户|
|hash|String|交易的hash|

<p align="left">返回的结果信息：
![image](https://github.com/codeboxcat/-/blob/master/3.5.1%E9%92%B1%E5%8C%85.jpg?raw=true)

<p align="left"><a name="3.6. 钱包余额同步">3.6. 钱包余额同步</a>

&ensp; &ensp;当外部账户直接在外部（或在调用本平台的账户充值）向本系统用户钱包中的账户进行转账，那么其流水和余额都没有记录在火花链接入平台中，这时需要进行相同同步，本接口是对其余额进行同步，达到火花链接入平台的用户余额和公链上的余额同步。
<p align="left">接口地址：/v1/wallet/syncBalance  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|二选一】用户IdwalletAddr和userId二选一|
|chainCode|String|区块链编码（目前支持jingtum和moac）|
|tokenCode|String|通证编码（比如：jingtum的默认通证为SWT)|

<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/3.6%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|address|String|账户地址|
|balance|String|余额|
|tokenCode|String|通证编码|
|freezed|String|冻结的金额|
<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/3.6.1%E9%92%B1%E5%8C%85.jpg?raw=true)


<p align="left"><a name="3.7. 获取钱包的账户信息">3.7. 获取钱包的账户信息</a>  
<p align="left">接口地址：/v1/wallet/accounts  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址:walletAddr和userId二选一|
|userId|String|【二选一】用户IdwalletAddr和userId二选一|
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/3.7%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|accounts|list|账户信息|
|accountId|Long|账户Id|
|chainCode|String|区块链编码|
|accountAddr|String|账户地址|

<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/3.7.1.jpg?raw=true)


**<p align="left"><a name="4. 用户账户接口">4. 用户账户接口</a>**  
&ensp; &ensp;用户账户与用户钱包对应，一个用户钱包包括多个用户账户，在一个公链上针对同一个用户，在火花接入平台创建一个账户，用来管理其公链的处理。这里提供了更底层的操作，接入应用可以直接使用这些账户接口对公链进行直接操作。

<p align="left"><a name="4.1. 创建账户">4.1. 创建账户</a>  
&ensp; &ensp;根据指定的公链，在其公链上创建账户，返回其公钥和私钥。  
<p align="left">接口地址：/v1/account/creatAccount  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|chainCode|String|区块链编码（目前支持jingtum和moac，可选择其中一种）| 
<p align="left">提交示例： 
--- 
![image](https://github.com/codeboxcat/-/blob/master/4.1%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|privateKey|String|账户的私钥|
|publicKey|String|账户的公钥|
|addr|String|账户地址|

<p align="left">返回示例：  
![image](https://github.com/codeboxcat/-/blob/master/4.2%E9%92%B1%E5%8C%85.jpg?raw=true)

<p align="left"><a name="4.2. 账户充值">4.2. 账户充值</a>   
&ensp; &ensp;外部账户向本平台的账户或平台的钱包进行充值，比如创建app钱包之后，就需要外部账户向其app钱包中充值，然后app钱包向用户钱包转账。  
<p align="left">接口地址：/v1/account/charge  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数:  
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|chainCode|String|区块链编码|
|tokenCode|String|通证编码|
|srcAccount|String|充值方的账户|
|srcPrivateKey|String|充值方的账户私钥|
|destAccount|String|【三选一】接受方的账户当为空时，（1）可传入destWalletAddr（2）可传入appid,destUserId|
|destWalletAddr|String|【三选一】接收方的钱包地址|
|appid|Long|应用Id，和destUserId结合在一起使用|
|destUserId|String|【三选一】接受方的用户Id|
|bizId|String|业务ID（每次操作都不能重复，保证事务）|
|amount|String|充值金额|  
<p align="left">提交示例：
![image](https://github.com/codeboxcat/-/blob/master/4.2%E9%92%B1%E5%8C%85.jpg?raw=true)

<p align="left"><a name="4.3. 账户的支付请求">4.3. 账户的支付请求</a>  
&ensp; &ensp;不同其账户充值。两个外部账户可以通过该接口进行转账，本平台中会保存它们转账的流水记录。  
<p align="left">接口地址：/v1/account/transfer  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|srcAccount|String|支付方的账户|
|privateKey|String|支付方的账户私钥|
|destAccount|String|接受方的账户|
|amount|String|支付金额|
|chainCode|String|区块链编码|
|tokenCode|String|通证编码|
|memo|String|【可选】记录内容|
|bizId|String|业务Id（每次操作都不能重复，保证事务）|
|gasLimit|Long|【可选】Gas的上限倍数jingtum公链对gas的设置不起效，默认是0.01SWT|
|gasPrice|Long|【可选】Gas计费单位jingtum公链对gas的设置不起效，默认是0.01SWT|  
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/4.3%E6%94%AF%E4%BB%98%E8%AF%B7%E6%B1%82.jpg?raw=true)
---  
<p align="left">返回的结果信息：  
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）---链返回正确的结果，但是交易有可能还在运行中|
|data|Object|数据|
|gasFee|String|Gas费用|
|hash|String|交易返回的hash值|  
<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/4.3.3%E6%94%AF%E4%BB%98%E8%AF%B7%E6%B1%82.jpg?raw=true)


<p align="left"><a name="4.4. 获取账户余额">4.4. 获取账户余额</a>  
<p align="left">根据账户的地址获取账户的余额。  
<p align="left">接口地址：/v1/account/balance  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数： 
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|account|String|账户|
|chainCode|String|区块链编码（目前支持jingtum和moac，选其一填写）|
|tokenCode|String|通证编码（比如：jingtum的通证是SWT）|
<p align="left">请求示例： 
--- 
![image](https://github.com/codeboxcat/-/blob/master/4.4%E8%8E%B7%E5%8F%96%E8%B4%A6%E6%88%B7%E4%BD%99%E9%A2%9D.jpg?raw=true) 
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|address|String|账户地址|
|balance|String|余额|
|tokenCode|String|通证编码|
|freezed|String|冻结金额|

<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/4.4.1获取账户余额.jpg?raw=true)


<p align="left"><a name="4.5. 获取账户支付信息">4.5. 获取账户支付信息</a>   
&ensp; &ensp;获取账户支付的流水详细信息。
<p align="left">接口地址：/v1/account/transInfo  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|account|String|账户|
|chainCode|String|【可选】区块链编码（比如：jingtum）|
|tranHash|String|支付交易的hash|
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/4.5获取账户支付信息.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|tradeTime|Date|交易时间|
|tokenCode|String|通证编码|
|gasFee|String|交易费用|
|amount|String|支付金额|
|memos|String|记录内容|
|tranHash|String|交易的hash|
|destAccount|String|接受方的账户|
|srcAccount|String|支付方的账户|
|issuer|String|发行方|
<p align="left">返回示例：  
``<div align=center>
![image](https://github.com/codeboxcat/python/blob/master/image1.png?raw=true)
---
<font color=#0099ff size=48 face="黑体">**火花链接入平台**


**标准服务接口**</font> 
---

<font color=#0099ff size=4 face="黑体"><center>通用版</center></font> 


<img src="https://github.com/codeboxcat/python/blob/master/image2.png?raw=true" width="70" height="40" />

  
  <br /><br /><br /><br /><br /><font color=#0099ff size=4 face="黑体">烨链（上海）科技有限公司<br /><br /><br /><br /><br />
  



  

---
<font color=black size=2>**修改记录**</font>  

| 版本号         | 发布时间       | 内容   |
| :------------- |:-------------| :-----|
| V0.1          | 2018/3/28    | 初版             |
| V0.2          |2018/3/29     | 统一数据格式      |
|V0.3           | 2018/4/24     |   扩展文本上链接口 |
|V0.9           | 2018/5/20     |  重构及跨链支持    |
|V0.9.1          |2018/5/27   |   调整和优化部分接口参数，增加accessToken的使用方式 |
|V0.9.2         |2018/6/1   |   丰富大量接口，调整部分接口参数  |
  
  <br /><br /><br /> <br /><br /><br /><br /><br /><font color=black size=4>**目录**</font>
  
###<p align="left"><a href="#1. 引言">1. 引言</a>  
######<p align="left"><a href="#1.1. 概述">1.1. 概述</a>  
######<p align="left"><a href="#1.2. 名词解释">1.2. 名词解释</a>
######<p align="left"><a href="#1.3. 统一说明">1.3. 统一说明</a>

###<p align="left"><a href="#2. 接入系统接口">2. 接入系统接口</a>
######<p align="left"><a href="#2.1. 接入系统初始化">2.1. 接入系统初始化</a>
######<p align="left"><a href="#2.2. 生成访问凭证">2.2. 生成访问凭证</a>
######<p align="left"><a href="#2.3. 创建企业钱包">2.3. 创建企业钱包</a>
######<p align="left"><a href="#2.4. 创建用户钱包">2.4. 创建用户钱包</a>
######<p align="left"><a href="#2.5. 选择区块链[可选]">2.5. 选择区块链[可选]</a>
######<p align="left"><a href="#2.6. 选择通证[可选]">2.6. 选择通证[可选]</a>
######<p align="left"><a href="#2.7. 同步所有钱包[可选]">2.7. 同步所有钱包[可选]</a>
######<p align="left"><a href="#2.8. 获取系统消息[可选]">2.8. 获取系统消息[可选]</a>

###<p align="left"><a href="#3. 用户钱包操作接口">3. 用户钱包操作接口</a> 
######<p align="left"><a href="#3.1. 设置支付密码">3.1. 设置支付密码</a> 
#####<p align="left"><a href="#3.2. 钱包的支付请求">3.2. 钱包的支付请求</a>
#####<p align="left"><a href="#3.3. 获取钱包余额">3.3. 获取钱包余额</a>
#####<p align="left"><a href="#3.4. 获得支付信息">3.4. 获得支付信息</a>
#####<p align="left"><a href="#3.5. 获得支付历史">3.5. 获得支付历史</a>
#####<p align="left"><a href="#3.6. 钱包余额同步">3.6. 钱包余额同步</a>
#####<p align="left"><a href="#3.7. 获取钱包的账户信息">3.7. 获取钱包的账户信息</a>

###<p align="left"><p align="left"><a href="#4. 用户账户接口">4. 用户账户接口</a> 
#####<p align="left"><a href="#4.1. 创建账户">4.1. 创建账户</a>
#####<p align="left"><a href="#4.2. 账户充值">4.2. 账户充值</a>
#####<p align="left"><a href="#4.3. 账户的支付请求">4.3. 账户的支付请求</a>
#####<p align="left"><a href="#4.4. 获取账户余额">4.4. 获取账户余额</a>
#####<p align="left"><a href="#4.5. 获取账户支付信息">4.5. 获取账户支付信息</a>


   <font color=gray size=3>火花链接入平台标准服务接口</font>  
---  
#<p align="left"><a name="1. 引言">1. 引言</a>

<p align="left">引言部分主要包括概述、名词解释和统一说明三部分。 </p>  



**<p align="left"><a name="1.1. 概述">1.1. 概述</a>**

&ensp; &ensp;火花链接入平台是对接于各行各业应用和各大公链之间的接入平台，采用一系列技术来提高公链的接入TPS，并统一公链之间的接入差异，简化应用的区块链接入，使得一套接口能快速在各种不同公链之间进行切换或进行跨链交易。

**<p align="left"> <a name="1.2. 名词解释">1.2. 名词解释</a>**

 
| 名词         | 英文       | 说明   |
| :------------- |:-------------| :-----|
| 钱包| wallet| 火花链接入平台中的钱包，一个钱包可以包括多个不同公链上的账户，把不同公链中的账户统一起来，实现跨链交易。|
| 钱包地址|walletAddr| 火花链接入平台中的钱包的地址，通过该地址可以查询其下所有账户的余额和流水，配置钱包支付密码，可以进行跨链转账。|
|密码| password |钱包的密码，通过该密码，用户可以查询其下所有账户的余额和流水 |
|支付密码| payPassword | 钱包的支付密码|
|账户|account  | 账户对应着公链中的钱包，代表公链钱包中的公钥地址。|
|私钥 |c | 账户的私钥 |
|App钱包|App wallet|每个在火花链接入平台注册的应用系统，都需要创建一个应用级别的钱包，该钱包就是APP钱包。|
|用户钱包|User wallet|接入的应用系统的用户也需要钱包来进行业务上的交易，该用户对应的火花链接入平台钱包就是用户钱包。|  

 **<p align="left">	<a name="1.3. 统一说明">1.3. 统一说明</a>**  
 <p align="left">1：接口地址    
 &ensp; &ensp;测试系统域名:[https://tapi.sparkchain.cn](https://tapi.sparkchain.cn)，以下章节中所设计的接口地址都需要在访问时加上该测试系统，如接入系统初始化的接口地址为：/v1/app/init，  
那么在浏览器中则使用[https://tapi.sparkchain.cn/v1/app/init](https://tapi.sparkchain.cn/v1/app/init)即可。  
 <p align="left">2：返回格式  
    &ensp; &ensp;接口返回格式统一，采用JSON格式返回，JSON格式中包括 success,code，message和data。如下图1所示：
    <div align=center>
![image](https://github.com/codeboxcat/-/blob/master/1528702150106.jpg?raw=true)
---  
图1 接口统一的格式  
&ensp; &ensp;Code：接口处理的标识，其中 成功：200, 请求失败: 400，未认证:401, 服务器内部错误:505。其它的code的代表业务错误编码。 
 
&ensp; &ensp;Message：返回的消息，主要是指错误的返回信息，对于正确的返回，也有可能会给出一些提示信息和警告信息。Data:返回的业务数据。  

 <p align="left">3：问题及沟通
 火花链BaaS开发者QQ总群：594629943  
 &ensp; &ensp;火花链BaaS开发者微信群，扫下方二维码加好友，备注火花链BaaS开发，然后拉进群。  <div align=center>
![image](https://github.com/codeboxcat/-/blob/master/问题及沟通微信二维码.jpg?raw=true)
---

 
#<p align="left"> <a name="2. 接入系统接口">2. 接入系统接口</a>
  
  

接入系统接口为业务系统上链提供了一系列的接口，首先接入系统得在火花链接入平台进行注册初始化，换取接入应用系统的accessToken。然后就可以根据初始化的相关信息来创建应用系统级别的APP钱包，创建App钱包之后，根据业务所需，为其应用系统中用户在火花链接入平台中创建用户钱包。之后的上链或交易就发生在这些钱包之间。

**<p align="left"> <a name="2.1. 接入系统初始化">2.1. 接入系统初始化</a>**
   
 &ensp; &ensp;接入系统初始化对业务系统上链相关的信息进行初始化，主要传入业务系统编号、名称及回调地址,成功时返回appid和appsecret。  
 <p align="left">接口地址：/v1/app/init. 
 <p align="left">请求方式：GET/POST  
 提交参数：  
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|appcode|String|业务系统编号,一般用业务系统的拼音缩写或英文|
|appname|String|业务系统名称，一般用中文名|
|transCallBackUrl|String|【可选】业务系统在进行交易时，不能立即返回状态，通过该地址进行回调，获取事务的返回状态|
|msgCallBackUrl|String|【可选】通过该地址进行回调，获取消息的返回值|
|userid|String|【可选】传入租户ID（针对租用平台和企业统一上链接入平台）|
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/请求示例.jpg?raw=true)
---

<p align="left">返回的结果信息：

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|appid|String|业务系统ID|
|appsecret|String|业务系统的秘钥|
<p align="left">返回示例：
---
![image](https://github.com/codeboxcat/-/blob/master/返回示例.jpg?raw=true)
---
 
**<p align="left">	<a name="2.2. 生成访问凭证">2.2. 生成访问凭证</a></p>**  
 
<p align="left">调用其它接口时，一般都需要访问凭证。通过此接口就可以获取访问凭证accessToken，访问凭证有一定的时效性（目前2个小时）。  
<font color=Red >如果需要在代码中使用访问凭证，可以参考附1的简单示例（java语言）  
<p align="left"><font color=#0099ff >接口地址：/v1/app/access  
请求方式：GET/POST  
接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|appid|String|业务系统的ID|
|appsecret|String|业务系统的秘钥|  
<p align="left">请求示例： 
--- 
![image](https://github.com/codeboxcat/-/blob/master/请求示例2.jpg?raw=true)
---
<p align="left">返回的结果信息： 
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|accessToken|String|访问凭证|
<p align="left">返回示例：
---
![image](https://github.com/codeboxcat/-/blob/master/返回示例3.jpg?raw=true)
  
**<p align="left"><a name="2.3. 创建企业钱包">2.3. 创建企业钱包</a></p>**  
  为当前的接入应用创建一个应用级别的钱包，所有用户钱包的激活及GAS的充值，都需要或者可以通过该钱包来进行转账。  
 <p align="left">接口地址：/v1/app/createAppWallet
 <p align="left">请求方式：GET/POST
 接口参数：
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|chainCodes|String|【可选】区块链编码（多个值，用逗号分隔），目前支持jingtum和moac。如果指定该参数，会在创建App钱包之前为当前的App应用系统关联上对应的公链。也可以使用2.5节中的选择区块链接口预先进行公链的关联。此参数值可为空|
|onlyWallet|boolean|【可选】是否仅生成钱包（默认值为false）,如果为true，那么只生成钱包，不到关联的公链上创建账户，默认会创建账户。|  

<p align="left">请求示例：
---
![](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B4.jpg?raw=true)
---
<p align="left">返回的结果信息：

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址,通过该地址可以找到账户|
|userId|String|用户Id|
|password|String|查询密码|
|accounts|list|账户列表|
|chainCode|String |区块链的编码|
|account|String|账户|

<p align="left">返回示例：

![](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B5.jpg?raw=true)
---

**<p align="left"><a name="2.4. 创建用户钱包">2.4. 创建用户钱包</a></p>**  
 &ensp; &ensp;为注册的企业应用系统中的用户创建用户钱包，每个人仅可以创建一个用户钱包，以传入的用户名作为应用系统中的唯一标识，密码是用户用来查询其余额和交易记录等相关使用。  
<p align="left">接口地址：/v1/app/createWallet  
<p align="left">请求方式：GET/POST
<p align="left">接口参数：

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
| accessToken |String|访问凭证|
|userId|String|用户Id|
|password|String|查询密码|
|onlyWallet|boolean|【可选】是否仅生成钱包（默认值为false）,如果为true，那么只生成钱包，不到关联的公链上创建账户，默认会创建账户。|  


<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B5.jpg?raw=true)
---
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|appId|String|应用Id|
|userId|String|用户Id|
|accounts|list|账户列表|
|chainCode|String|区块链编码|
|account|String|账户|  

<p align="left">返回示例：
![iamge](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B6.jpg?raw=true)  
**<p align="left"><a name="2.5. 选择区块链[可选]">2.5. 选择区块链[可选]</a>**  
&ensp; &ensp;接入系统在接入区块链时到底接入哪个或哪些公链呢？不像其它平台，在火花链接入平台中，把这个选择的权利完全交给接入系统自己，接入系统不仅能选择块链，同时还可以通过接口来注册相关的公链到火花链平台（未开放），然后进行选择。选择区域链的操作已经集成到创建企业钱包中，没有特殊的要求，不需要单独调用该接口来进行区域链的选择。  
<p align="left">接口地址：/v1/app/selectChain  
<p align="left">请求方式：GET/POST  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|chainCodes|String|区块链编码（多个值时，用逗号分隔），目前支持jingtum和moac，可二选一|
<p align="left">请求示例：
---
![iamge](https://github.com/codeboxcat/-/blob/master/%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B6.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|  

<p align="left">返回示例：  
---
![image](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B7.jpg?raw=true)  
---

**<p align="left"><a name="2.6. 选择通证[可选]">2.6. 选择通证[可选]</a></p>** 

&ensp; &ensp;接入不同的公链之后，接入系统需要关注的是在其接入系统中需要使用哪一些代币（通证）来进行交易，比如接入系统可以自己发行自己的币种，然后采用自己发行的币种在自己的接入系统中进行交易，这个时候就需要给不同接入系统选择不同的代币（通证）的权利。  
&ensp; &ensp;选择通证的前提是需要发布第三方通证，可以通过第五章的接口进行发布，也可以在交流群中联系管理员进行后台的发布。  
&ensp; &ensp;如果不发行代币的话或者不使用第三方代币的话，那么就没有必要使用该接口来选择通证，对于原生通证（如moac链对应的MOAC代币及jingtum链对应的SWT代币）在创建App钱包时就已经进行了关联，没有必要再进行选择。  
<p align="left">接口地址：/v1/app/selectToken  
<p align="left">请求方式：GET/POST
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|chainCode|String|区块链编码(目前支持jingtum和moac)|
|tokenCodes|String|通证编码（多个值时，用逗号分隔）|  
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B7.jpg?raw=true)  
---

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|  
<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B8.jpg?raw=true)
**<p align="left"><a name="2.7. 同步所有钱包[可选]">2.7. 同步所有钱包[可选]</a>**. 
&ensp; &ensp;接入应用系统已经创建了App钱包和用户钱包并进行交易，有可能需要在应用系统中增加新的公链支持或代币（通证）支持，那么就需要通过选择区块链和和选择通证来进行关联，这时需要为所有用户钱包和app钱包创建新加公链的账户及账户下面的各种不同的代币的余额。  
&ensp; &ensp这就需要采用当前的接口来同步所有钱包，为接入应用系统的所有钱包都加创建新链的账户和初始化新币种的余额。因为调用该接口需要较长时间，平台采用异步处理方式，处理完成之后调用2.1节中msgCallBackUrl参数指定的回调地址回写处理结果，也可能通过调用2.8节中的系统消息来查看其处理结果。  
&ensp; &ensp可见，使用火花链接入平台中接入的话，不需要在接入初始化时考虑过多的需求，可以先接入应用，然后再逐步完善所需要的上链处理。所有的技术细节都屏蔽在火花链接入平台，提供一个简单易用的区块链接入方式。  
<p align="left">接口地址：/v1/app/syncAllWallet
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|  
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/%E6%8F%90%E4%BA%A4%E7%A4%BA%E4%BE%8B1.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|data|Object|数据|
|success|boolean|True:表明成功|
<p align="left">返回示例：  

![image](https://github.com/codeboxcat/-/blob/master/%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B9.jpg?raw=true)
**<p align="left"><a name="2.8. 获取系统消息[可选]">2.8. 获取系统消息[可选]</a>**  
&ensp; &ensp;接入业务系统在使用火花链接入平台过程，会产生各种不同的系统消息，这些系统消息都保存在接入业务系统对应的消息库中。有的接口会调用注册的消息回调处理（2.1节中的参数）进行回写，有的接口会直接返回。也可以使用当前接口来获取其完整的系统消息列表。  
<p align="left">接口地址：/v1/app/sysMsg  
<p align="left">请求方式：GET/POST
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|msgType|String|【可选】消息类型|
|userId|String|【可选】用户Id|
|msgState|Integer|【可选】消息状态|
|pagesize|Integer|【可选】返回的每页数据量，默认每页10项|
|pagenum|Integer|【可选】返回第几页的数据，默认从1开始|  
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/提交示例2.jpg?raw=true)
---

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|data|	Object |数据|
|result|list|结果信息|
|appid|Long|对应的appid|
|createtime|String|创建时间|
|id|String|消息id|
|msgs|String|消息内容|
|state|Integer|消息状态|
|type|String|消息类型|
|userid|String|用户id|
|viewtime|Long|查看时间|
<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/返回示例10.jpg?raw=true)


<p align="left"><a name="3. 用户钱包操作接口">3. 用户钱包操作接口</a>   


&ensp; &ensp;接入业务系统上链的基本操作就是业务系统中用户进行转账等基本的操作，这些操作在发生在用户钱包之间。用户钱包操作接口主要对于用户之间的转账进行管理，以及对于转账之后的余额或交易流水进行查询。

<p align="left"><a name="3.1. 设置支付密码">3.1. 设置支付密码</a>  

&ensp; &ensp;用户钱包在转账之前，首先需要设定支付密码，通过该接口，来设置钱包的支付密码。
<p align="left">接口地址：/v1/wallet/setPayPassword
<p align="left">请求方式：GET/POST
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户Id walletAddr和userId二选一|
|password|String|查询密码|
|payPassword|String|支付密码|
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B3.1.jpg?raw=true)
---

<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|userId|String|用户Id|
<p align="left">返回示例：

![image](https://github.com/codeboxcat/-/blob/master/%E9%92%B1%E5%8C%853.1.2.jpg?raw=true)


<p align="left"><a name="3.2. 钱包的支付请求">3.2. 钱包的支付请求</a> 
 
&ensp; &ensp;钱包的支付功能是业务系统上链的最基本也是核心的功能，通过该接口可以实现同链同币之间的支付转账，也可以实现不同链中不同币之间的支付转账（目前开发中）。实现同一钱包，跨越不同公链的之间的交易。屏蔽了上链的难度。  

<font color=Red>&ensp; &ensp;注意：如果使用已经创建的钱包进行支付，其支付方的钱包需要有足够的代币，默认情况下没有代币，支付方钱包需要通过外部来源充入代币，详细与管理员联系。</font>  
<p align="left">接口地址：/v1/wallet/transfer  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|srcWalletAddr|String|【三选一】支付方的钱包地址(srcWalletAddr、srcUserId 、srcAccount）|
|srcUserId|String|【三选一】支付方的用户Id（srcWalletAddr、srcUserId 、srcAccount）|
|srcAccount|String|【三选一】支付方的账户（srcWalletAddr、srcUserId和srcAccount）|
|payPassword|String|支付方的支付密码|
|chainCode|String|区块链编码|
|tokenCode|String|通证编码(比如：jingtum的SWT、moac的MOAC)|
|destWalletAddr|String|【三选一】接受方的钱包地址(destWalletAddr、destUserId和destAccount）|
|destUserId|String|【三选一】接受方的用户Id（destWalletAddr、destUserId和destAccount）|
|destAccount|String|【三选一】接受方的账户（destWalletAddr、destUserId和destAccount）|
|amount|String|支付金额|
|bizId|String|业务Id（每次操作都不能重复，保证事务）|
|memo|String|【可选】记录内容|
|gasLimit|Long|【可选】Gas的上限倍数|
|gasPrice|Long|【可选】Gas计费价格单位|


<p align="left">请求示例：
---  
![image](https://github.com/codeboxcat/-/blob/master/%E9%92%B1%E5%8C%853.2.jpg?raw=true)
---

<p align="left">结果返回参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）---链返回正确的结果，但是交易有可能还在运行中|
|data|Object|返回数据|
|gasFee|String|交易费用|
|hash|String|交易返回的hash值|
<p align="left">结果示例：  

![image](https://github.com/codeboxcat/-/blob/master/3.2.2%E9%92%B1%E5%8C%85.jpg?raw=true)


<p align="left"><a name="3.3. 获取钱包余额">3.3. 获取钱包余额</a>  
支付完成之后，通过该接口获取用户钱包中的余额  
接口地址：/v1/wallet/balances  
请求方式：GET/POST  
接口参数:  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户IdwalletAddr和userId二选一|
|chainCode|String|【可选】区块链编码|
|tokenCode|String|【可选】通证编码（比如：jingtum的SWT、moac的MOAC）（为空时，可以查看该钱包下所有账户的余额）|
<p align="left">请求示例：
---  
![image](https://github.com/codeboxcat/-/blob/master/3.3%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息：
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|userId|String|用户Id|
|balances|list|余额数据|
|tokenCode|String|通证编码|
|balance|String|余额|
|chainCode|String|区块链编码|
|freezed|String|冻结的金额|
<p align="left">返回示例：  
![image](https://github.com/codeboxcat/-/blob/master/3.3.3.jpg?raw=true)

<p align="left"><a name="3.4. 获得支付信息">3.4. 获得支付信息</a>   

&ensp; &ensp;通过该接口获取转几天交易的详细流水信息。  
<p align="left">接口地址：/v1/wallet/transInfo
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|tranHash|String|交易hash|
|forceRefresh|boolean|【可选】强制刷新（默认为false，当为true时，会获取链上数据）|
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/3.4%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息:  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功），但交易有可能还在运行中，获取空的data|
|data|Object|返回数据|
|tokenCode|String|通证编码|
|tradeTime|Date|交易时间|
|amount|String|交易金额|
|gasFee|String|Gas费用|
|chainCode|String|区块链编码|
|memos|String|记录内容|
|destAccount|String|接受方的账户|
|srcAccount|String|支付方的账户|
|hash|String|交易的hash值|
<p align="left">获取不到支付信息时，返回结果：
![image](https://github.com/codeboxcat/-/blob/master/3.4.3.jpg?raw=true)

<p align="left">获取到支付信息时，返回结果：
![image](https://github.com/codeboxcat/-/blob/master/3.4.4.jpg?raw=true)
  

<p align="left"><a name="3.5. 获得支付历史">3.5. 获得支付历史</a>
&ensp; &ensp;通过该接口可以获取后用户通过火花链接入平台进行转账的所有流水。如果用户钱包中账户在接入平台外部进行转账，那么就需要通过账户接口中同步流水来先同步，然后可以获得钱包的所有流水（包括外部转账的流水)  
<p align="left">接口地址：/v1/wallet/transInfoList  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【三选一】钱包地址 （walletAddr、userId、accounts）备注：可以看到该钱包下所有账户的支付历史|
|userId|String|【三选一】用户Id（walletAddr、userId、accounts）备注：可以看到该用户钱包下账户的支付历史|
|accounts|String|【三选一】账户（walletAddr、userId、accounts）备注：可以看到指定账户的支付历史|
|pagesize|Integer|【可选】返回的每页数据量，默认每页10项|
|pagenum|Integer|【可选】返回第几页的数据，默认从1开始|
|starttime|String|【可选】开始时间，比如:2018-01-01 00:00:00|
|endtime|String|【可选】结束时间，比如：2018-06-01 23:59:59|
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/3.5%E9%92%B1%E5%8C%85.jpg?raw=true)
---
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|total|Integer|总记录数|
|pageSize|Integer|每页数据量|
|pageNum|Integer|第几页|
|results|list|结果数据|
|tokenCode|String|通证编码|
|tradeTime|Date|交易时间|
|amount|String|记录金额|
|gasFee|Double|交易费用|
|chainCode|String|区块链编码|
|memos|String|记录内容|
|destAccount|String|接受方的账户|
|state|Integer|状态（-1：失败；0：初始；1：等待；8：同步成功；9：成功）|
|srcAccount|String|发起方的账户|
|hash|String|交易的hash|

<p align="left">返回的结果信息：
![image](https://github.com/codeboxcat/-/blob/master/3.5.1%E9%92%B1%E5%8C%85.jpg?raw=true)

<p align="left"><a name="3.6. 钱包余额同步">3.6. 钱包余额同步</a>

&ensp; &ensp;当外部账户直接在外部（或在调用本平台的账户充值）向本系统用户钱包中的账户进行转账，那么其流水和余额都没有记录在火花链接入平台中，这时需要进行相同同步，本接口是对其余额进行同步，达到火花链接入平台的用户余额和公链上的余额同步。
<p align="left">接口地址：/v1/wallet/syncBalance  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|二选一】用户IdwalletAddr和userId二选一|
|chainCode|String|区块链编码（目前支持jingtum和moac）|
|tokenCode|String|通证编码（比如：jingtum的默认通证为SWT)|

<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/3.6%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|address|String|账户地址|
|balance|String|余额|
|tokenCode|String|通证编码|
|freezed|String|冻结的金额|
<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/3.6.1%E9%92%B1%E5%8C%85.jpg?raw=true)


<p align="left"><a name="3.7. 获取钱包的账户信息">3.7. 获取钱包的账户信息</a>  
<p align="left">接口地址：/v1/wallet/accounts  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址:walletAddr和userId二选一|
|userId|String|【二选一】用户IdwalletAddr和userId二选一|
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/3.7%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|accounts|list|账户信息|
|accountId|Long|账户Id|
|chainCode|String|区块链编码|
|accountAddr|String|账户地址|

<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/3.7.1.jpg?raw=true)


**<p align="left"><a name="4. 用户账户接口">4. 用户账户接口</a>**  
&ensp; &ensp;用户账户与用户钱包对应，一个用户钱包包括多个用户账户，在一个公链上针对同一个用户，在火花接入平台创建一个账户，用来管理其公链的处理。这里提供了更底层的操作，接入应用可以直接使用这些账户接口对公链进行直接操作。

<p align="left"><a name="4.1. 创建账户">4.1. 创建账户</a>  
&ensp; &ensp;根据指定的公链，在其公链上创建账户，返回其公钥和私钥。  
<p align="left">接口地址：/v1/account/creatAccount  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|chainCode|String|区块链编码（目前支持jingtum和moac，可选择其中一种）| 
<p align="left">提交示例： 
--- 
![image](https://github.com/codeboxcat/-/blob/master/4.1%E9%92%B1%E5%8C%85.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|privateKey|String|账户的私钥|
|publicKey|String|账户的公钥|
|addr|String|账户地址|

<p align="left">返回示例：  
![image](https://github.com/codeboxcat/-/blob/master/4.2%E9%92%B1%E5%8C%85.jpg?raw=true)

<p align="left"><a name="4.2. 账户充值">4.2. 账户充值</a>   
&ensp; &ensp;外部账户向本平台的账户或平台的钱包进行充值，比如创建app钱包之后，就需要外部账户向其app钱包中充值，然后app钱包向用户钱包转账。  
<p align="left">接口地址：/v1/account/charge  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数:  
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|chainCode|String|区块链编码|
|tokenCode|String|通证编码|
|srcAccount|String|充值方的账户|
|srcPrivateKey|String|充值方的账户私钥|
|destAccount|String|【三选一】接受方的账户当为空时，（1）可传入destWalletAddr（2）可传入appid,destUserId|
|destWalletAddr|String|【三选一】接收方的钱包地址|
|appid|Long|应用Id，和destUserId结合在一起使用|
|destUserId|String|【三选一】接受方的用户Id|
|bizId|String|业务ID（每次操作都不能重复，保证事务）|
|amount|String|充值金额|  
<p align="left">提交示例：
![image](https://github.com/codeboxcat/-/blob/master/4.2%E9%92%B1%E5%8C%85.jpg?raw=true)

<p align="left"><a name="4.3. 账户的支付请求">4.3. 账户的支付请求</a>  
&ensp; &ensp;不同其账户充值。两个外部账户可以通过该接口进行转账，本平台中会保存它们转账的流水记录。  
<p align="left">接口地址：/v1/account/transfer  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|srcAccount|String|支付方的账户|
|privateKey|String|支付方的账户私钥|
|destAccount|String|接受方的账户|
|amount|String|支付金额|
|chainCode|String|区块链编码|
|tokenCode|String|通证编码|
|memo|String|【可选】记录内容|
|bizId|String|业务Id（每次操作都不能重复，保证事务）|
|gasLimit|Long|【可选】Gas的上限倍数jingtum公链对gas的设置不起效，默认是0.01SWT|
|gasPrice|Long|【可选】Gas计费单位jingtum公链对gas的设置不起效，默认是0.01SWT|  
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/4.3%E6%94%AF%E4%BB%98%E8%AF%B7%E6%B1%82.jpg?raw=true)
---  
<p align="left">返回的结果信息：  
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）---链返回正确的结果，但是交易有可能还在运行中|
|data|Object|数据|
|gasFee|String|Gas费用|
|hash|String|交易返回的hash值|  
<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/4.3.3%E6%94%AF%E4%BB%98%E8%AF%B7%E6%B1%82.jpg?raw=true)


<p align="left"><a name="4.4. 获取账户余额">4.4. 获取账户余额</a>  
<p align="left">根据账户的地址获取账户的余额。  
<p align="left">接口地址：/v1/account/balance  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数： 
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|account|String|账户|
|chainCode|String|区块链编码（目前支持jingtum和moac，选其一填写）|
|tokenCode|String|通证编码（比如：jingtum的通证是SWT）|
<p align="left">请求示例： 
--- 
![image](https://github.com/codeboxcat/-/blob/master/4.4%E8%8E%B7%E5%8F%96%E8%B4%A6%E6%88%B7%E4%BD%99%E9%A2%9D.jpg?raw=true) 
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|address|String|账户地址|
|balance|String|余额|
|tokenCode|String|通证编码|
|freezed|String|冻结金额|

<p align="left">返回示例：
![image](https://github.com/codeboxcat/-/blob/master/4.4.1获取账户余额.jpg?raw=true)


<p align="left"><a name="4.5. 获取账户支付信息">4.5. 获取账户支付信息</a>   
&ensp; &ensp;获取账户支付的流水详细信息。
<p align="left">接口地址：/v1/account/transInfo  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|account|String|账户|
|chainCode|String|【可选】区块链编码（比如：jingtum）|
|tranHash|String|支付交易的hash|
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/4.5获取账户支付信息.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|tradeTime|Date|交易时间|
|tokenCode|String|通证编码|
|gasFee|String|交易费用|
|amount|String|支付金额|
|memos|String|记录内容|
|tranHash|String|交易的hash|
|destAccount|String|接受方的账户|
|srcAccount|String|支付方的账户|
|issuer|String|发行方|
<p align="left">返回示例：  

```  
{
"code": "200",
"data": {
    "tradeTime": "1527306620",
    "tokenCode": "SWT",
    "gasFee": "0.01",
    "amount": "0.001",
    "memos": "[\"accout transfer 0.001swt\"]",
    "tranHash": "820ABB9C3CFAB6CF260FB277D2B1FE563FCF1B3B67A944E7B4826C1DA9C40BDF",
    "destAccount": "jJYv8v11eMSFHALHJgjLXwZwhMnzAK4kcZ",
    "srcAccount": "jhrSnysLGBz1xXgvSKf3evAc8yt4G4UPgR",
    "issuer": ""
    },
"message": "",
"success": true
}
```

<p align="left"><a name="4.6. 同步流水">4.6. 同步流水</a>   
&ensp; &ensp;当链上的流水和接入平台的流水不同步时，主要发现在其账户在外部进行转入或转出的交易，这时需要调用同步流水，把链上的流水同步到火花接入平台中，然后就可以根据各种不同的条件来进行查询。
<p align="left">接口地址：/v1/account/syncWaterflow  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|account|String|账户|
|chainCode|String|区块链编码|
|tokenCode|String|通证编码|
|syncSize|Integer|【可选】同步大小 （默认为10）|  
<p align="left">提交示例：
---
![image](https://github.com/codeboxcat/-/blob/master/同步流水.jpg?raw=true)
---  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|list|返回数据|
|destinyPublicKey|String|目标方的公钥|
|tokenCode|String|通证编码|
|tradeTime|String|交易时间|
|createtime|String|创建时间|
|payTime|String|支付时间|
|chainCode|String|区块链编码|
|memos|Date|记录内容|
|dispAmount|Date|显示的转账金额|
|tradeHash|Date|交易的hash|
|srcPublicKey|String|发起方的公钥|

<p align="left">返回示例：  

```  
{
    "code": "200",
    "data": [
        {
            "destinyPublicKey": "jLoMncrtJzsi5FihFUrX2KgWRdPs8vpejT",
            "tokenCode": "SWT",
            "tradeTime": 1527322870000,
            "createtime": 1527322870000,
            "payTime": 1527322870000,
            "chainCode": "jingtum",
            "memos": "[]",
            "dispAmount": "9",
            "tradeHash": "11491457EC19A30EF40EC4BF0DA78B2819B3B91253BDFF921DDD3CE932B24F7D",
            "srcPublicKey": "jaXL8B92w3aGq1XDt2e5bRW7P3nkdtTViT"
        }
    ],
    "message": "",
    "success": true
}
```
<p align="left"><a name="4.7. 获取账户支付历史">4.7. 获取账户支付历史</a>  
&ensp; &ensp;获取指定账户在链上的支付历史，获取之前需要调用同步流水操作，然后再调用该接口。  
<p align="left">接口地址：/v1/account/transInfoList  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|account|String|账户|
|pagesize|Integer|【可选】返回的每页数据量，默认每页10项|
|pagenum|Integer|【可选】返回第几页的数据，默认从1开始|
|starttime|String|【可选】开始时间，比如：2018-01-01 00:00:00|
|endtime|String|【可选】结束时间，比如： 2018-06-01 23:59:59|  
 
<p align="left">提交示例：  
---
![image](https://github.com/codeboxcat/-/blob/master/4.7获取账户支付历史.jpg?raw=true) 
---

<p align="left">返回的结果信息： 

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|total|Integer|总记录数|
|pageSize|Integer|每页数据量|
|pageNum|Integer|第几页|
|results|list|结果数据|
|tokenCode|String|通证编码|
|tradeTime|Date|交易时间|
|amount|String|支付金额|
|gasFee|String|交易费用|
|chainCode|String|区块链编码|
|memos|String|记录内容|
|destAccount|String|接受方的账户|
|state|String|状态（-1：失败；0：初始；1：等待；8：同步成功；9：成功）|
|srcAccount|String|支付方的账户|
|hash|String|交易的hash|
<p align="left">返回示例：  

```  
{
    "code": "200",
    "data": {
        "total": 1,
        "pageSize": 10,
        "pageNum": 1,
        "results": [
            {
                "tokenCode": "SWT",
                "tradeTime": 1527298540000,
                "amount": "1",
                "gasFee": 0.01,
                "chainCode": "jingtum",
                "memos": null,
                "destAccount": "jhrSnysLGBz1xXgvSKf3evAc8yt4G4UPgR",
                "state": 9,
                "srcAccount": "j3pnSUaSbgJZ5UeqSwWjTAQWbbsjjY5GJ6",
                "hash": "F97B14CA578DC91DBDFEFDED159E4FA3CA380187BE9BE489069CB1CDA1BC3BA4"
            }
        ]
    },
    "message": "",
    "success": true
}
```


<p align="left"><a name="5. 用户钱包账户关联接口">5. 获取账户支付历史</a>  
&ensp; &ensp;对于已经有的用户钱包，如果需要和账户的进行关联，或者把账户绑定到指定钱包中，可以调用这些接口进行处理


<p align="left"><a name="5.1. 绑定单个账户">5.1. 绑定单个账户</a> 

&ensp; &ensp;钱包绑定一个当前系统不存在的账户，如果存在的账户会自动进行关联处理。  
<p align="left">接口地址：/v1/wallet/bindAccount  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数： 
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|钱包地址|
|chainCode|String|区块链编码|
|account|String|账户|
|accountPrivatekey|String|账户的私钥（可选）当账户不属于当前平台，需要有私钥|
<p align="left">请求示例：  
---
![image](https://github.com/codeboxcat/-/blob/master/5.1绑定单个账户.jpg?raw=true)
---
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|data|Object|返回数据|  
<p align="left">返回示例：  

```  
{
    "code": "200",
    "data": null,
    "message": ""
}
```
<p align="left"><a name="5.2. 绑定多个账户">5.2. 绑定多个账户</a>  
&ensp; &ensp;钱包绑定多个当前系统不存在的账户，如果存在的账户会自动进行关联处理。  
<p align="left">接口地址：/v1/wallet/bindAccounts  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|钱包地址|
|accounts|Array|多账户|
|chainCode|String|区块链编码|
|account|String|账户|
|accountPrivatekey|String|账户的秘钥（可选）|
<p align="left">请求示例：  
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|data|	Object|返回数据|  

<p align="left"><a name="5.3. 关联单个账户">5.3. 关联单个账户</a>   
&ensp; &ensp;钱包关联一个当前系统已存在的账户，这样就可以实现一个账户绑定到多个钱包中去，满足用户更高级的业务需求。  
<p align="left">接口地址：/v1/wallet/linkAccount  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数： 
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|钱包地址|
|accountId|String|账户Id（“sc_physical_wallet”表的id值）|
<p align="left">请求示例：
---
![image](https://github.com/codeboxcat/-/blob/master/5.3关联单个账户.jpg?raw=true)
---
返回的结果信息：   

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|data|Object|返回数据|

<p align="left">返回示例：  

```  
{
    "code": "200",
    "data": null,
    "message": ""
}
```
<p align="left"><a name="5.4. 关联多个账户">5.4. 关联多个账户</a>   

&ensp; &ensp;钱包关联多个当前系统已存在的账户，这样就可以实现一批账户绑定到多个钱包中去，满足用户更高级的业务需求。  
<p align="left">接口地址：/v1/wallet/linkAccounts  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|钱包地址|
|accountIds|String|多账户Id（多值用逗号分隔）（“sc_physical_wallet”表的id值）|  

<p align="left">请求示例：  
<p align="left">返回的结果信息： 
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|int|请求结果|
|message|String|返回信息|
|data|Object|返回数据|  

<p align="left"><a name="6. 文本上链接口">6. 文本上链接口</a>   

&ensp; &ensp;文本上链接口可以实现各种类型的业务系统中的文本信息上传到区块链中，文本上链可以使得相关的信息永久保留在公链上。  

<p align="left"><a name="6.1. 文本上链">6.1. 文本上链</a> 
<p align="left">把指定的文本上链  
<p align="left">接口地址：/v1/text/record  
<p align="left">请求方式：POST  
<p align="left">接口参数：  


| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|srcWalletAddr|String|【三选一】支付方的钱包地址（srcWalletAddr、srcUserId 、srcAccount)|
|srcUserId|String|【三选一】支付方的钱包地址（srcWalletAddr、srcUserId 、srcAccount）|
|srcAccount|String|【三选一】支付方的用户Id（srcWalletAddr、srcUserId 、srcAccount）|
|payPassword|String|支付密码|
|chainCode|String|区块链编码|
|tokenCode|String|通证编码|
|destWalletAddr|String|【三选一】接受方的钱包地址（destWalletAddr、destUserId、destAccount）|
|destUserId|String|【三选一】接受方的用户Id（destWalletAddr、destUserId、destAccount|
|destAccount|String|【三选一】接受方的账户（destWalletAddr、destUserId、destAccount）|
|memo|String|记录内容|
|bizId|String|业务Id（每次操作都不能重复，保证事务）|
|amount|String|【可选】金额，执行该接口时，花费的金额，比如：jingtum在文本添加时，不填写该值，会花费1SWT|
|gasLimit|Long|【可选】Gas的上限倍数jingtum公链对gas的设置不起效，默认是0.01SWT|
|gasPrice|Long|【可选】Gas计费单位jingtum公链对gas的设置不起效，默认是0.01SWT|
  
<p align="left">请求示例：  

---
![image](https://github.com/codeboxcat/-/blob/master/6.1.jpg?raw=true)
---    


| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）---链返回正确的结果，但是交易有可能还在运行中|
|data|Object|返回数据|
|gasFee|String|交易费用|
|hash|String|交易返回的hash值|



<p align="left">结果示例：  

```  
{
    "code": "200",
    "data": {
        "gasFee": "0.01",
        "hash": "0C38FC15B01E39837AF42508D6DDF6D85861E051326605390A43D2C032CD049B"
    },
    "message": "",
    "success": true
}
```  

<p align="left"><a name="6.2. 查询文本内容">6.2. 查询文本内容</a>  
<p align="left">接口地址：/v1/text/recordInfo   
<p align="left">请求方式：GET/POST  
<p align="left">接口参数： 
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|tranHash|String|交易的hash|
|forceRefresh|boolean|【可选】强制刷新（默认为false，当为true时，会获取链上数据|  
<p align="left">请求示例： 
 
---
![image](https://github.com/codeboxcat/-/blob/master/6.2.jpg?raw=true)
---

<p align="left">返回的结果信息：  
  
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|tokenCode|String|通证编码|
|tradeTime|Date|交易时间|
|amount|String|支付金额|
|gasFee|String|交易费用|
|chainCode|String|区块链编码|
|memos|String|记录内容|
|destAccount|String|接受方的账户|
|srcAccount|String|发起方的账户|
|hash|String|交易的hash|

<p align="left">结果示例：  

```
{
    "code": "200",
    "data": {
        "tokenCode": "SWT",
        "tradeTime": 1527322680000,
        "amount": "1",
        "gasFee": 0.01,
        "chainCode": "jingtum",
        "memos": "测试文本2",
        "destAccount": "jJYv8v11eMSFHALHJgjLXwZwhMnzAK4kcZ",
        "srcAccount": "jhrSnysLGBz1xXgvSKf3evAc8yt4G4UPgR",
        "hash": "32188ACB11D5B8E67E170A27105C916DD8975CB06C5202B2FF596EA44F06F6AE"
    },
    "message": "",
    "success": true
}
```  

<p align="left"><a name="6.3. 查询文本列表">6.3. 查询文本列表</a>  
<p align="left">接口地址：/v1/text/recordInfoList  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【三选一】钱包地址（walletAddr、userId、accounts）|
|userId|String|【三选一】用户Id（walletAddr、userId、accounts）|
|accounts|String|【三选一】账户（walletAddr、userId、accounts）|
|pagesize|Integer|【可选】返回的每页数据量，默认每页10项|
|pagenum|Integer|【可选】返回第几页的数据，从第1页开始，默认为1|
|starttime|String|【可选】开始时间，比如：2018-01-01 00:00:00|
|endtime|String|【可选】结束时间，比如： 2018-06-01 23:59:59|  

<p align="left">请求示例：  
---
![image](https://github.com/codeboxcat/-/blob/master/6.3.jpg?raw=true)
---  
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功|
|data|Object|返回数据|
|total|Integer|总记录数|
|pageSize|Integer|每页数据量|
|pageNum|Integer|第几页|
|results|String|结果数据|
|tokenCode|String|通证编码|
|tradeTime|String|交易时间|
|amount|String|记录金额|
|gasFee|String|交易费用|
|chainCode|String|区块链编码|
|memos|String|记录内容|
|destAccount|String|接受方的账户|
|state|Integer|状态（-1：失败；0：初始；1：等待；8：同步成功；9：成功|
|srcAccount|String|发起方的账户|
|hash|String|交易的hash|

<p align="left">结果示例：  

```
{
    "code": "200",
    "data": {
        "total": 1,
        "pageSize": 10,
        "pageNum": 1,
        "results": [
            {
                "tokenCode": "SWT",
                "tradeTime": 1527298539000,
                "amount": "1",
                "gasFee": 0.01,
                "chainCode": "jingtum",
                "memos": "account transfer 1swt",
                "destAccount": "jJYv8v11eMSFHALHJgjLXwZwhMnzAK4kcZ",
                "state": 9,
                "srcAccount": "jhrSnysLGBz1xXgvSKf3evAc8yt4G4UPgR",
                "hash": "844AAAC62446CBC66EF2C96286FDE40BACE20F38ABBBE53021D0F78ECA207044"
            }
        ]
    },
    "message": "",
    "success": true
}
```

<p align="left"><a name="7. 用户钱包密码接口">7. 用户钱包密码接口</a>  
<p align="left"><a name="7.1 修改查询密码">7.1 修改查询密码</a>   
<p align="left">通过该接口，可以修改钱包的查询密码。  
<p align="left">接口地址：/v1/wallet/modifyPassword  
<p align="left">请求方式：GET/POST  
<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户IdwalletAddr和userId二选一|
|oldPassword|String|旧的查询密码|
|newPassword|String|新的查询密码|  
 
<p align="left">提交示例：
---  
![image](https://github.com/codeboxcat/-/blob/master/7.1.jpg?raw=true)
---  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|userId|String|用户Id|  

<p align="left">返回示例：  

```
{
    "code": "200",
    "data": {
        "success": true,
        "walletAddr": "3226d31d-5d3f-4c1c-802f-909b60772c05",
        "userId": "999540864483065856"
    },
    "message": "",
    "success": true
}
```  



<p align="left"><a name="7.2. 重置查询密码">7.2. 重置查询密码</a>  


<p align="left">通过该接口，可以重置钱包的查询密码，返回新的查询密码，然后调用“修改查询密码”接口，对查询密码进行修改。  

<p align="left">接口地址：/v1/wallet/resetPassword  

<p align="left">请求方式：GET/POST  

<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户IdwalletAddr和userId二选一|  
<p align="left">提交示例： 
 
---
![image](https://github.com/codeboxcat/-/blob/master/7.2.jpg?raw=true)
---  

<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功)|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|newPwd|String|新的查询密码|
|userId|String|用户Id|  

<p align="left">返回示例：  
  
```
{
    "code": "200",
    "data": {
        "walletAddr": "3226d31d-5d3f-4c1c-802f-909b60772c05",
        "newPwd": "1000206015276253184",
        "userId": "999540864483065856"
    },
    "message": "",
    "success": true
}
```  


<p align="left"><a name="7.3. 验证查询密码">7.3. 验证查询密码</a>  
<p align="left">通过该接口，校验查询密码的正确性。  

<p align="left">接口地址：/v1/wallet/validPassword  

<p align="left">请求方式：GET/POST  

<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户Id walletAddr和userId二选一|
|password|String|查询密码|  

<p align="left">提交示例：  

---
![image](https://github.com/codeboxcat/-/blob/master/7.3.jpg?raw=true)
---  

<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|userId|String|用户Id|  

<p align="left">返回示例：  

```
{
    "code": "200",
    "data": {
        "walletAddr": "3226d31d-5d3f-4c1c-802f-909b60772c05",
        "userId": "999540864483065856"
    },
    "message": "",
    "success": true
}
```

<p align="left"><a name="7.4. 修改支付密码">7.4. 修改支付密码</a>  

<p align="left">通过该接口，设置钱包的支付密码。 
 
<p align="left">接口地址：/v1/wallet/updatePayPassword  

<p align="left">请求方式：GET/POST  

<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户IdwalletAddr和userId二选一|
|oldPayPassword|String|旧的支付密码|
|newPayPassword|String|新的支付密码|  

<p align="left">请求示例：  
---
![image](https://github.com/codeboxcat/-/blob/master/7.4.jpg?raw=true)
---  
<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|userId|String|用户ID|  
<p align="left">返回示例:  

```
{
    "code": "200",
    "data": {
        "walletAddr": "3226d31d-5d3f-4c1c-802f-909b60772c05",
        "userId": "999540864483065856"
    },
    "message": "",
    "success": true
} 
```  

<p align="left"><a name="7.5. 重置支付密码">7.5. 重置支付密码</a>   

<p align="left">通过该接口，重置钱包的支付密码。  

<p align="left">接口地址：/v1/wallet/resetPayPassword  

<p align="left">请求方式：GET/POST  

<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户Id walletAddr和userId二选一|

<p align="left">请求示例：  

---
![image](https://github.com/codeboxcat/-/blob/master/7.5.jpg?raw=true)
---

<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|newPwd|String|新支付密码|
|userId|String|用户ID|  

<p align="left">返回示例：  

```
{
    "code": "200",
    "data": {
        "walletAddr": "3226d31d-5d3f-4c1c-802f-909b60772c05",
        "newPwd": "1000207735158996992",
        "userId": "999540864483065856"
    },
    "message": "",
    "success": true
}
```

<p align="left"><a name="7.6. 验证支付密码">7.6. 验证支付密码</a>  

<p align="left">通过该接口，验证钱包支付密码的正确性。  

<p align="left">接口地址：/v1/wallet/validPayPassword  

<p align="left">请求方式：GET/POST  

<p align="left">接口参数：  
 
| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|accessToken|String|访问凭证|
|walletAddr|String|【二选一】钱包地址walletAddr和userId二选一|
|userId|String|【二选一】用户IdwalletAddr和userId二选一|
|payPassword|String|支付密码|  

<p align="left">请求示例：  


---
![image](https://github.com/codeboxcat/-/blob/master/7.6.jpg?raw=true)
---

<p align="left">返回的结果信息：  


| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|walletAddr|String|钱包地址|
|userId|String|用户ID|  

<p align="left">返回示例：  

```
{
    "code": "200",
    "data": {
        "walletAddr": "3226d31d-5d3f-4c1c-802f-909b60772c05",
        "userId": "999540864483065856"
    },
    "message": "",
    "success": true
}
```



<p align="left"><a name="8. 系统管理接口">8. 系统管理接口</a>   


该类接口让用户进行系统管理，用户可以到docker hub下载Docker镜像，本地设定。Docker地址脚本 ：  

---
docker run -d --name moac_node_java_mysql_redis -p 8545:8545 -p 3306:3306 -p 6379:6379   --env TESTNET="--testnet"  -v /root/:/root/ sparkchain/moac_node_java_mysql_redis:0.8.2  
---  
  
  
详细到[www.sparkda.com](www.sparkda.com)进行提问  


<p align="left"><a name="8.1. 注册区块链[可选，待实现]">8.1. 注册区块链[可选，待实现]</a>  

如果下载了docker镜像，其默认初始化moac和jingtum链，可以在本地的环境中注册其它区域链，当然需要实现其相关的接口  

<p align="left">接口地址：/v1/sys/registChain  

<p align="left">请求方式：GET/POST  

<p align="left">接口参数：  


| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|chainId|String|区块链Id|
|chainName|String|区块链名称|
|chainCode|String|区块链编码|
|apis|String|调用接口|
|tokenName|String|通证名称|
|tokenCode|String|通证编码|
|currency|String|货币单位|
|precisions|Integer|通证精度|
|units|String|通证单位|  

<p align="left">请求示例：  




<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|请求结果|
|data|Object|返回数据|  



<p align="left">返回示例：  

<p align="left"><a name="8.2. 新增通证[可选]">8.2. 新增通证[可选]</a>   
  在某区块链上，创建非原生的通证，该接口目前可支持MOAC区块链，不支持在Jingtum区块链。  

<p align="left">接口地址：/v1/sys/createToken  

<p align="left">请求方式：GET/POST  

<p align="left">接口参数:  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|String|String|chainCode|
|name|String|通证名称|
|code|String|通证编码|
|account|String|发行方（账户地址）|
|privateKey|String|发行方的私钥|
|precisions|String|通证精度|
|currency|String|货币单位|
|amount|String|发币的总量|  

<p align="left">请求示例：  

---
![image](https://github.com/codeboxcat/-/blob/master/8.2.jpg?raw=true)
---

<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|
|hash|String|通证发布上链返回的hash值|  

<p align="left">返回示例：  

```
{
    "code":"200",
    "data":{
        "hash":"0x4754cfba8841b5a2b4d1fc0ceb31383d8e7366240b699c603f9114e7704e2b98"
    },
    "message":"",
    "success":true
}
```

<p align="left"><a name="8.3. 添加通证[可选，待实现]">8.3. 添加通证[可选，待实现]</a>  
 
添加一个区块链上已存在的通证。  

<p align="left">接口地址：/v1/sys/addToken  

<p align="left">请求方式：GET/POST  

<p align="left">接口参数：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|chainCode|String|区块链编码|
|name|String|通证名称|
|code|String|通证编码|
|issuer|String|发行方（账户地址）(可选)|
|precisions|String|通证精度|
|currency|String|货币单位|
|contractAbi|String|智能合约编译后的abi代码|
|contractAddr|String|代币合约地址|  


<p align="left">请求示例： 

--- 
![image](https://github.com/codeboxcat/-/blob/master/8.3.jpg?raw=true)
---


<p align="left">返回的结果信息：  

| 参数         | 类型       | 说明   |
| :------------- |:-------------| :-----|
|code|String|请求结果|
|message|String|返回信息|
|success|boolean|是否成功（true：成功）|
|data|Object|返回数据|  

<p align="left">返回示例：  

```
{
    "code": "200",
    "data": null,
    "message": "",
    "success": true
}
```

---
<p align="left">附1：AccessToken获取简单示例  

```
public class SparkChainBaasUtils {
	public static String accessToken = "";
	public static String accessUrl = "https://tapi.sparkchain.cn";
	// todo:可以配置到配置文件中，然后通过其它方式获取到
	public static String chainAppId = "";
	public static String chainSecret = "";
	// 简单示例
	private String createWallet(String openId) throws IOException {
		String url = accessUrl + "/v1/app/createWallet";
		Map<String, String> params = new HashMap<>();
		params.put("userId", openId);
		params.put("password", "123456");

		Map<String, ?> map = invokeBaas(url, params);
		return (String) getDataValue(map, "walletAddr");
	}

	/**
	 * 调用火花链接入平台的统一调用方法，实现简单的accessToken的获取
	 * 
	 * @param url            api的地址
	 * @param params           调用的参数
	 * @return
	 */
	public static Map<String, ?> invokeBaas(String url, Map<String, String> params) throws IOException {
		preGetToken(params);
		Map<String, ?> map = doExec(url, params);
		// 5001说明是accessToken失败，需要重新获取accessToken，放到查询参数中
		if (containAndEq(map, "code", "5001")) {
			// 重新获取的accessToken
			String token = reTryGetToken(params);
			if (StringUtils.isNotNullOrEmpty(token)) {
				map = (Map<String, Object>) doExec(url, params);
			} else {
				// TODO:需要系统自行进行异常处理
			}
		}
		return map;
	}

	private static String getAccessTokenFromSystem() throws IOException {
		String url = accessUrl + "/v1/app/access";
		Map<String, String> params = new HashMap<>();
		// chainAppId和chainSecret是静态变量
		params.put("appid", chainAppId);
		params.put("appsecret", chainSecret);

		String result = HttpUtils.post(url, params);
		Map<String, Object> map = JSON.parseObject(result, Map.class);
		return (String) getDataValue(map, "accessToken");

	}

	private static String preGetToken(Map<String, String> params) throws IOException {
		if (accessToken == null || "".equals(accessToken.trim())) {
			accessToken = getAccessTokenFromSystem();
		}
		params.put("accessToken", accessToken);
		return accessToken;
	}

	private static String reTryGetToken(Map<String, String> params) throws IOException {
		String token = getAccessTokenFromSystem();
		if (StringUtils.isNullOrEmpty(token)) {
			// TODO:可以重试，可以抛出异常，进行相关处理
			return null;
		} else {
			accessToken = token;
			params.put("accessToken", accessToken);
			return accessToken;
		}
	}

	private static Map<String, ?> doExec(String url, Map<String, String> params) throws IOException {
		String result = HttpUtils.post(url, params);
		Map<String, Object> map = JSON.parseObject(result, Map.class);
		return map;
	}
	private static Object getDataValue(Map<String, ?> map, String dataKey) {
	if (map == null || map.get("data") == null) {	return null;}
		Map<String, ?> data = (Map<String, ?>) map.get("data");
		return data.get(dataKey);
	}

	public static boolean containAndEq(Map map, String key, Object value) {
		if (map == null) {		return false;	}
		if (!map.containsKey(key)) {	return false;	}
		if (value instanceof String) {return value.equals(map.get(key));}
		if (map.get(key) == value) {	return true;	}
		return false;
	}
}
```

